(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a7b49fe"],{"0966":function(e,t,r){"use strict";var n=r("2632"),i=r.n(n);i.a},2632:function(e,t,r){},b7d4:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"100px"}},[r("el-form-item",{attrs:{label:"问卷名称",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"问卷介绍",prop:"intro"}},[r("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),r("div",{staticClass:"add-option"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOption(e.questionType.SINGLE_CHOICE)}}},[e._v("单选题")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOption(e.questionType.MULTIPLE_CHOICE)}}},[e._v("多选题")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOption(e.questionType.TEXT_QUESTION)}}},[e._v("文本题")])],1),r("question-list",{attrs:{"question-list":e.form.topic},on:{delQuestion:e.onDelQuestion,addOption:e.onAddOption,delOption:e.onDelOption}}),r("el-form-item",{attrs:{label:"截止时间",prop:"deadline"}},[r("el-date-picker",{attrs:{type:"datetime","picker-options":e.datePickerOptions,placeholder:"选择日期时间"},model:{value:e.form.deadline,callback:function(t){e.$set(e.form,"deadline",t)},expression:"form.deadline"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"default"},on:{click:function(t){return e.submitNaire(e.NaireStatus.UNPUBLISHED)}}},[e._v("保存问卷")]),r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitNaire(e.NaireStatus.PUBLISHED)}}},[e._v("发布问卷")])],1)],1)],1)},i=[],o=(r("a4d3"),r("4de4"),r("a434"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("96cf"),r("ade3")),a=r("d4ec"),s=r("bee2"),c=r("99de"),u=r("7e84"),l=r("262e"),p=r("9ab4"),d=r("60a3"),f=r("5a0c"),b=r.n(f),m=r("3ec7"),O=r("5d15"),v=r("f6b1"),y=r("9bcc");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(e){function t(){var e;return Object(a["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.questionType=O["a"],e.NaireStatus=v["a"],e.form={title:"",intro:"",deadline:"",status:0,options:"",topic:[]},e.rules={title:[{required:!0,message:"请输入问卷标题",trigger:"blur"}],deadline:[{required:!0,message:"请选择截止时间",trigger:"blur"}]},e.datePickerOptions={disabledDate:function(e){return e.getTime()<b()().add(-1,"day").valueOf()}},e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"onAddOption",value:function(e){var t=e.index,r={content:"选项",isAddition:!1,image:"",desc:""};this.form.topic[t].options.push(h({},r))}},{key:"onDelOption",value:function(e){var t=e.index,r=e.opIndex;if(this.form.topic[t].options.length<2)return this.$message.warning("已经是最后一个选项，无法删除。");this.form.topic[t].options.splice(r,1)}},{key:"onDelQuestion",value:function(e){var t=e.index;this.form.topic.splice(t,1)}},{key:"addOption",value:function(e){switch(e){case O["a"].SINGLE_CHOICE:var t={question:"单选题目",options:[{content:"选项",isAddition:!1,image:"",desc:""}],description:"",type:"单选",isRequired:!0,selectContent:"",setting:{last:1},additional:""};this.form.topic.push(t);break;case O["a"].MULTIPLE_CHOICE:var r={question:"多选题目",options:[{content:"选项",isAddition:!1,image:"",desc:""}],description:"",type:"多选",isRequired:!0,setting:{last:1},selectMultipleContent:[]};this.form.topic.push(r);break;case O["a"].TEXT_QUESTION:var n={question:"文本题目",description:"",type:"文本",isRequired:!0,setting:{},selectContent:""};this.form.topic.push(n);break}}},{key:"submitNaire",value:function(e){var t=this,r=this.$refs.form;r.validate((function(e){var r,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return");case 2:if(0!==t.form.topic.length){i.next=4;break}return i.abrupt("return",t.$message.warning("请至少添加一道题目。"));case 4:return r={naire:h({},t.form,{deadline:new Date(t.form.deadline).getTime()}),status:"create"},i.next=7,regeneratorRuntime.awrap(m["c"](r));case 7:if(n=i.sent,!n.success){i.next=14;break}return t.$message.success("新建问卷成功！"),i.next=12,regeneratorRuntime.awrap(t.$router.push("/list"));case 12:i.next=15;break;case 14:t.$message.error(n.msg);case 15:case"end":return i.stop()}}))}))}}]),t}(d["c"]);k=p["a"]([Object(d["a"])({components:{QuestionList:y["a"]}})],k);var w=k,j=w,x=(r("0966"),r("2877")),E=Object(x["a"])(j,n,i,!1,null,"4f11d606",null);t["default"]=E.exports}}]);
//# sourceMappingURL=chunk-4a7b49fe.e61171e6.js.map