(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3556ea8c"],{"03ca":function(t,e,n){},"0447":function(t,e,n){},"3ec7":function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"i",(function(){return c})),n.d(e,"d",(function(){return o})),n.d(e,"h",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"k",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"l",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"e",(function(){return b}));var a=n("b32d"),r=function(){return a["a"].get("/naire",{})},i=function(t){return a["a"].post("/naire/save",t,{headers:{"Content-Type":"application/json; charset=UTF-8"}})},s=function(t){return a["a"].post("/naire/statis",t,{headers:{"Content-Type":"application/json; charset=UTF-8"}})},c=function(t){return a["a"].get("/naire/sourcedata",t)},o=function(t){return a["a"].post("/naire/crossanalysis",t,{headers:{"Content-Type":"application/json; charset=UTF-8"}})},u=function(t){return a["a"].post("/naire/questions",t,{headers:{"Content-Type":"application/json; charset=UTF-8"}})},l=function(t){return a["a"].post("/naire/detail",t,{headers:{"Content-Type":"application/json; charset=UTF-8"}})},d=function(t){return a["a"].post("/naire/submit",t,{headers:{"Content-Type":"application/json; charset=UTF-8"}})},f=function(t){return a["a"].get("/naire/changeStatus",t)},h=function(t){return a["a"].get("/naire/submitStatis",t)},p=function(t){return a["a"].post("/naire/changeTime",t)},b=function(t){return a["a"].get("/naire/del",t)}},"99af":function(t,e,n){"use strict";var a=n("23e7"),r=n("d039"),i=n("e8b5"),s=n("861d"),c=n("7b0b"),o=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),f=n("b622"),h=n("60ae"),p=f("isConcatSpreadable"),b=9007199254740991,m="Maximum allowed index exceeded",v=h>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=d("concat"),_=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:i(t)},g=!v||!y;a({target:"Array",proto:!0,forced:g},{concat:function(t){var e,n,a,r,i,s=c(this),d=l(s,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(i=-1===e?s:arguments[e],_(i)){if(r=o(i.length),f+r>b)throw TypeError(m);for(n=0;n<r;n++,f++)n in i&&u(d,f,i[n])}else{if(f>=b)throw TypeError(m);u(d,f++,i)}return d.length=f,d}})},b56b:function(t,e,n){"use strict";var a=n("0447"),r=n.n(a);r.a},d257:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));n("d81d");var a=n("5a0c"),r=n.n(a),i=function(t,e){e.map((function(e){t.map((function(t){return"timestamp"===t?r()(e[t]).format("YYYY-MM-DD HH:mm:ss"):e[t]}))}))},s=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}},d81d:function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").map,i=n("d039"),s=n("1dde"),c=s("map"),o=c&&!i((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));a({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e4f8:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.naire?n("div",{staticClass:"header-info"},[n("h2",{staticClass:"title"},[t._v(t._s(t.naire.title))]),n("div",[n("el-tag",{staticClass:"publish-status",attrs:{type:0===t.naire.status?"danger":"success",effect:"plain"}},[t._v(" "+t._s(0===t.naire.status?"未发布":"已发布")+" ")]),n("p",{staticClass:"extend"},[t._v(" 创建日期： "+t._s(t._f("formatTime")(t.naire.creattime))+" | 截止日期："+t._s(t._f("formatTime")(t.naire.deadline))+" ")])],1),t._t("default")],2):t._e()},r=[],i=n("d4ec"),s=n("99de"),c=n("7e84"),o=n("262e"),u=n("9ab4"),l=n("60a3"),d=function(t){function e(){return Object(i["a"])(this,e),Object(s["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(l["c"]);u["a"]([Object(l["b"])()],d.prototype,"naire",void 0),d=u["a"]([Object(l["a"])({name:"HeaderInfo"})],d);var f=d,h=f,p=(n("f15b"),n("2877")),b=Object(p["a"])(h,a,r,!1,null,"38604cd8",null);e["a"]=b.exports},f15b:function(t,e,n){"use strict";var a=n("03ca"),r=n.n(a);r.a},f2ba:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]},[n("header-info",{attrs:{naire:t.naire}}),n("el-row",{staticClass:"cross-analysis-select",attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("h3",[t._v("自变量：")]),n("p",[t._v("一般为样本数据，例如性别和年龄，目前支持一项。")]),n("el-select",{staticStyle:{width:"100%"},model:{value:t.searchParams.x_id,callback:function(e){t.$set(t.searchParams,"x_id",e)},expression:"searchParams.x_id"}},t._l(t.questions,(function(t,e){return n("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),n("el-col",{attrs:{span:12}},[n("h3",[t._v("因变量：")]),n("p",[t._v("您要分析的目标题目，目前支持一项。")]),n("el-select",{staticStyle:{width:"100%"},model:{value:t.searchParams.y_id,callback:function(e){t.$set(t.searchParams,"y_id",e)},expression:"searchParams.y_id"}},t._l(t.questions,(function(t,e){return n("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1)],1),n("div",{staticClass:"cross-analysis-btn"},[n("el-button",{attrs:{type:"primary",icon:"ios-shuffle"},on:{click:t.crossAnalysis}},[t._v("交叉分析")])],1),t.columns&&t.result?n("div",{staticClass:"cross-analysis-table"},[n("el-table",{staticClass:"border-table",attrs:{size:"small",stripe:!0,data:t.result}},[n("el-table-column",{attrs:{label:"X \\ Y",prop:"type","min-width":"100","max-width":"150"}}),n("el-table-column",{attrs:{label:"小计",prop:"count",width:"100"}}),t._l(t.columns,(function(t,e){return n("el-table-column",{key:e,attrs:{label:t.title,prop:t.key,width:t.width}})}))],2)],1):t._e()],1)},r=[],i=(n("a4d3"),n("99af"),n("4de4"),n("d81d"),n("a9e3"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("159b"),n("ade3")),s=(n("96cf"),n("d4ec")),c=n("bee2"),o=n("99de"),u=n("7e84"),l=n("262e"),d=n("9ab4"),f=n("60a3"),h=n("e4f8"),p=n("3ec7"),b=n("d257");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(o["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.loading=!1,t.statisData={naire:null,row:[],column:[],crossResult:[]},t.naire=null,t.questions=[],t.searchParams={x_id:"",y_id:""},t.result=null,t.columns=null,t}return Object(l["a"])(e,t),Object(c["a"])(e,[{key:"formateData",value:function(){var t=this,e={};this.statisData.crossResult.forEach((function(t){e["".concat(t.y_id,"_").concat(t.x_id)]={count:t["count"],value:t["x_value"],y_id:t["y_id"],x_id:t["x_id"]}}));var n={};this.statisData.row.forEach((function(t){n[t.o_id]={id:t.o_value}}));var a=[];this.statisData.row.forEach((function(r){var i={type:n[r.o_id].id},s=0;t.statisData.column.forEach((function(t){var n=e["".concat(t.o_id,"_").concat(r.o_id)],a=n?Number(n.count):0;i["y_".concat(t.o_id)]=a,s+=a})),i.count=s,a.push(i)})),a.forEach((function(t){for(var e in t)t.hasOwnProperty(e)&&"type"!==e&&"count"!==e&&(t[e]="".concat(t[e]," (").concat(0===t[e]?0:Object(b["b"])(100*t[e]/t.count,2),"%)"))})),this.result=a}},{key:"getColumns",value:function(t){return t.map((function(t,e){return{title:t.o_value,key:"y_".concat(t.o_id),width:100}}))}},{key:"crossAnalysis",value:function(){var t,e;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,regeneratorRuntime.awrap(p["d"](v({n_id:this.$route.params.id},this.searchParams)));case 3:t=n.sent,this.loading=!1,t.success?(e=t.data.column,this.statisData={crossResult:t.data.cross_result,naire:t.data.naire,row:t.data.row,column:t.data.column},this.columns=this.getColumns(e),this.formateData()):(this.$message.error(t.data),this.$router.back());case 6:case"end":return n.stop()}}),null,this)}},{key:"fetchQuestionData",value:function(){var t,e,n,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return this.loading=!0,r.next=3,regeneratorRuntime.awrap(p["h"]({n_id:this.$route.params.id}));case 3:t=r.sent,this.loading=!1,t.success?(e=t.data,n=e.naire,a=e.questions,this.naire=n,this.questions=a):(this.$message.error(t.msg),this.$router.back());case 6:case"end":return r.stop()}}),null,this)}},{key:"mounted",value:function(){this.fetchQuestionData()}}]),e}(f["c"]);y=d["a"]([Object(f["a"])({components:{HeaderInfo:h["a"]}})],y);var _=y,g=_,w=(n("b56b"),n("2877")),j=Object(w["a"])(g,a,r,!1,null,"3f406720",null);e["default"]=j.exports}}]);
//# sourceMappingURL=chunk-3556ea8c.8fa6f7f1.js.map